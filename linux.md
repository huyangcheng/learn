

### 常用命令

+ `echo '内容' > 文件名`：将内容写入文件中，如果文件存在将覆盖
+ `echo $变量名`：输出环境变量名的内容
+ `date -s "yyyy-mm-dd HH:mm:ss"`：设置时间
+ `cal`：查看日历
+ `cat filename`：读取文件名中的内容
+ `who`：查看当前谁在线
+ `last [loginName]`：查看用户登录信息
+ `netstat -a`：查看网络联机状态
+ `sync`：将数据写入磁盘
+ `shutdown [-krhc] [执行时间执行] [警告讯息]`：关机，参数说明：
    + `-k` ：不是真的关机，只是发出消息
    + `-r` ：将系统服务停止后重新启动
    + `-h` ：将系统服务停止后立即关机
    + `-c` ：取消已经在进行的 **shutdown** 指令内容
     
    **示例**
    
    ```
    shutdown -h now 
    立即关机，now 表示等待时间为0
    shutwodn -h 20:25
    指定时间执行，如果时间小于当前时间那么第二天此时窒息感
    shutdown -h +30
    指定多少分钟后执行 
    ```        
+ `reboot`：重启
+ `halt`：关机，系统停止屏幕保留系统停止的讯息
+ `chgrp [-R] 群组名 目录名/文件名`：改变文件所属群组（change group  的缩写），群组名必须在 **/etc/group** 文件中存在
    + `-R`：进行递归的持续变更，即连同目录下的所有文件、目录都改变。
+ `chown [-R] 用户名[:群组名] 目录名/文件名 `：改变文件的拥有者（change owner 的缩写），用户必须在 **/etc/passwd** 中存在，并且可顺便修改所属群组，如果省略用户名那么将执行修改所属群组。群组名中的**：** 可用**.**代替。
    + `-R`：进行递归的持续变更，即连同目录下的所有文件、目录都改变。
+ `chomd [-R] 权限属性 目录名/文件名 `：改变文件的权限属性 （change mode 的缩写）
    + `-R`：进行递归的持续变更，即连同目录下的所有文件、目录都改变。
    + `权限属性`
        + 数字类型：rwx 分别对应数值 4、2、1。owner/group/others 三个身份的权限数值等于相应分值之和。
        
        示例代码
        ```
        # 三个身份数值都是7，7=4+2+1，那么对应的权限就是 rwxrwxrwx 拥有所有权限 
        chomd 777 file 
        # 设置 -rwxr-xr-- 的权限，分解出来首位为 4+2+1 = 7；第二位为 4+0+1 = 5；第三位为 4+0+0 = 4；
        # 那么权限数值即为 754  
        chomd 754 file
        ```
        + 符号类型：`ugo` 分别对应 `owner/group/others` 三个身份， a 代表所有身份； rwx 分别对应读写执行的权限；+-= 为操作符，分别对应对权限的操作类型；
        
        示例代码
        ```
        # u 等于 rwx 具备读写执行权限， go 等于 rx 具备 读执行权限。 使用 = 操作符号为赋值操作，将覆盖原有权限属性
        chomd u=rwx,go=rx file
        # u 等于 rwx 具备读写执行权限， g 在现有基础上减少写权限， o 在现有基础上加上读权限
        chomd u=rwx,g-w,o+r
        ```
* `cd` :变更目录
* `pwd [-P]`：显示当前路径，Print Working Directory 的缩写
    * -P：显示实际路径，而不是链接地址
* `mkdir [-mp] 目录名`：创建目录
    * -m：配置权限，默认使用预设权限

    ```
    mkdir -m 711 test
    ```
    * -p：递归创建，针对创建多个目录的情况下使用
    ```
    mkdir -p test/test1/test2/test3
    ```
* `rmdir [-p] 目录名`：删除一个空目录
    * -p：递归删除上层的空目录
* `ls [aAdfFgukbrRST] [--color={never,auto,always}] [--full-time] 文件名或者目录名`：
    + -a：全部文件，连同隐藏档
    + -A：全部文件，连同隐藏档，当不包含 . 和 .. 这两个目录
    + -d：仅列出目录本身，而不是列出目录内的文件数据
    + -f：直接列出结果，不进行排序
    + -F：根据文录、目录等信息，给予附加数据结构
        + *：可执行文件
        + /：目录
        + =：socket 文件
        + |：FIFO 文件
    + -h：将文件容量易读方式展示
    + -i：列出 inode 号码
    + -l：长数据串行出，包含文件的属性和权限等数据
    + -n：列出 UID 与 GID 
    + -r：将排序结果反向输出
    + -R：联通子目录内容一起列出来
    + -S：以文件容量大小排序
    + -t：依时间排序
    + --color：显示颜色
        + never ：不依据文件特性给予颜色显示
        + always ：显示颜色
        + auto ：系统自行依据核定判断是否线上颜色
    + --full-time ：完整时间模式        
+ `cp 来源文件 目标文件`：复制文件或目录
+ `rm [-fir] 文件或目录`：删除文件或目录
    + -f：强制删除，忽略不存在的文件
    + -i：互动删除，在删除前询问使用者是否动作
    + -r：递归删除
+ `mv [-fiu] 源文件 目标地址`：将源文件移动至目标地址
    + -f：强制移动，目标文件已经存在直接覆盖
    + -i：提示移动，目标文件已经存在询问是否覆盖
    + -u：若目标存在且源文件比较新才会覆盖
+ `basename 路径`：获取路径中的文件名
+ `dirname 路径`：获取路径中的目录名


    







### 文件相关

+ `/etc/passwd`：保存帐号信息
+ `/etc/shadow`：保存帐号密码
+ `/etc/group`：保存所有组名
+ `/etc/locale.conf`：系统默认语言
+ `/var/log/wtmp`：保存用户登录信息


### 文件属性

**格式**

```
[文件类型和权限]  [连结]  [拥有者]  [群组]  [文件容量]  [修改日期]  [文件名]

```

#### 文件类型和权限

**示例解析**

`-rwxrwx----`

第一个字符代表文件的类型，具体字符类型如下表

+ `d`： 目录
+ `-`：文件
+ `l`：连结档 （link file）
+ `b`：装置文件里面的可供储存的接口设备
+ `c`：装置文件里面的串行端口设备

接下来的字符，以三个为一组，且均为 `[rwx]` 的参数组合。其中，`[r]` 代表可读、`[w]` 代表可写、`[x]` 代表可执行。
这三个权限的位置不会改变，如果没权限，就会出现减号`[-]`。

+ 第一组为文件拥有者的权限
+ 第二组为加入此群组者的权限
+ 第三组为非本人且没有加入本群组其他帐号的权限

#### 文件操作功能与权限

拥有执行权限的目录，即使没有读权限也能进入目录并查看目录中的文件，如果有读权限那么 tab 将会进行名称补全

#### rwx 权限意义

+ `r`：具有读取目录结构列表的权限
+ `w`：具有异动目录结构列表的权限
    + 简历心的文件或者目录
    + 删除已存在的文件或者目录
    + 将已存在的文件或者目录进行更名
    + 搬移该目录内的文件、目录位置    
+ `x`：对于文件表示是否可执行；对于目录表示是否可进入


### 目录配置的依据--FHS

**Filesystem Hierarchy Standard** 标准用于规范每个特定的目录下应该要放置什么样子的数据

| | 可分享的 | 不可分享的 |
| - | - | - |
**不可变的** | /usr (软件放置处) | /etc (配置文件)
|| /opt (第三方协力软件) | /boot (开机与核心档)
**可变动的** | /var/mail (使用者邮件信箱) | /var/run (程序相关)
|| /var/spool/new (新闻组) | /var/lock (程序相关)

**四个类型**

+ `可分享的`：可分享给其他系统挂载使用的目录，包括执行文件与用户邮件等数据
+ `不可分享的`：自己机器上面运作的装置文件或者与程序相关的 socket 文件等
+ `不变的`：有些数据是不会经常变动的，例如函数库、文件说明文件、系统管理员所管理的主机服务配置文件等
+ `可变动的`：经常改变的数据，例如登录文件、一般用户可自行收受的新闻组等

**三层基本目录**

+ /(root，根目录)：与开机系统有关
+ /usr：与软件安装/执行有关
+ /var：与系统运作过程有关


### 文件内容查阅

+ `cat [AbEnTv] 文件名`：由第一行开始显示文件内容
    + -A：相当于 -vET 的整合，可列出一些特殊字符而不是空白
    + -b：列出行号,仅针对非空白行做行号显示，空白行不标行号
    + -E：将结尾的断行字符 $ 显示出来
    + -n：打印行号，空白行页打印
    + -T：将 [tab] 键以 ^I 线上出来
    + -v：列出一些看不出的特殊字符
+ `tac`：与 cat 命令一样，不过显示的内容相反
+ `more 文件名`：一页一页的查看文件内容
    + 空格键：下一页
    + 回车键：下一行
    + /字符串：向下搜索字符串
    + :f ：立即显示文件和当前行数
    + q ：离开 more
    + b ：回翻一页
+ `less 文件名`：一页一页的查看文件内容
    + 空格键：下一页
    + [pagedown]：下一页
    + [pageup]：上一页
    + /字符串：向下搜索字符串
    + ?字符串：向上搜索字符串
    + g ：第一行
    + G ：最后一行
    + q ：退出
+ `head [-n number] 文件名`：取前面几行
    + -n ：后面接数字，表示线上几行，默认 20 行，如果为负数代表最后数的行不显示
+ `tail [-n number -f] 文件名`：取后面几行
    + -n ：后面接数字，表示线上几行，默认 10 行，数值前使用 + 表示显示数值行以后的内容
    + -f ：持续监测
+ `head tail 配置使用命令`
    ```
    # 表示查看文件的第 11-20 行，首先获取 20 行，在通过 tail 查看最后 10 行
    # 两个指令中间使用 | 分割
    head -n 20 /xxxx.conf | tail -n 10
    ```
+ `touch [-acdmt] 文件`：创建文件或修改文件时间
    + a ：修订使用时间（access） 时间
    + c ：修改文件时间，文件不存在不创建
    + d ：指定时间而不是使用当前时间
    + m ：修改最后修改时间
    + t ：指定时间而不是使用当前时间,格式 [YYYYMMDDhhmm]

+ `whereis [-bmsu] 文件名`：在特定的目录中寻找文件名
    + -l ：列出所有查询的目录
    + -b ：只查找 binary 文件
    + -m ：只在说明文件路径下查找
    + -s ：只搜索 source 来源文件
    + -u ：寻找上面三个项目当中的其他特殊文件
+ `locate [-ir] keyword`
    + -i ：忽略大小写的差异
    + -c ：不输出档名，仅计算找到文件数量
    + -l ：仅输出几行的意思，-l 5 表示输出五行
    + -S ：输出 locate 使用的数据库文件相关信息
    + -r ：后面可接正规表示法的显示方式
+ `updatedb`：读取 /etc/updatedb.conf 配置的设定，去硬盘进行搜寻文件名的动作，最后更新数据库文件
+ `find [PATH] [option] [action]`：
    + 与时间相关的选项： [-atime -ctime -mtime]，下方以 -mtime 进行说明
        + -mtime n ： n 为数字，意义为在 n 天之前的一天内修改过的文件
        + -mtime +n ：列出在 n 天（不包含 n 本身）之前被修改过内容的文件
        + -mtime -n ：列出在 n 天（包含 n 本身）之内被修改过内容的文件
        + -mtime n ：n 为数字，意义为在 n 天之前的一天内修改过的文件
    + -newer 文件名 ：列出比文件名还要新的文件
    + -user name ：查找属于用户 name 的文件
    + -group name ：查找属于用户组 name 的文件
    + -nouser ：查找用户不存在的文件
    + -nogroup ：查找用户组不存在的文件
    + -name filename ：查找 filename 文件名的文件
    + -size [+-] SIZE ：查找比 size 还要大 (+) 或小 (-) 的文件，SIZE 规格有：
        c ： byte
        k ： 1024 bytes
    + -type TYPE ：查找类型为 TYPE 的文件， TYPE 类型有：
        + f ：一般正规文件
        + b,c ：装置文件
        + d ：目录
        + l ：连接档
        + s ：socket
        + ....
    + -perm [-/] mode：根据文件权限搜索
        + 默认： mode 为权限数值，搜索文件权限等于 mode 的文件
        + - ：搜索文件权限包含 mode 的文件
        + / ：搜索文件权限包含任一 mode 的文件
    + -exec command ：command 为指令，根据指定处理搜索结果




## 其他

+ `./xxx.sh 在当前目录下执行指定文件`：如果 xxx.sh 是一个执行文件，当前目录又并不是正规的执行文件目录，此时执行指令就要严格指定该执行档。./ 表示当前目录，所以就代表在当前目录执行 xxx.sh 文件
+ `环境遍历`：
    + 查找优先级：在环境遍历目录中，如果出现同名的文件，根据目录存放顺序绝对使用按个，谁先被找到执行谁
+ `文件的三个时间`
    + 修改时间（mtime）：文件内容发生变更时更新的时间
    + 状态时间（ctime）：文件状态发生变更时更新的时间，比如权限与属性变更了
    + 使用时间（atime）：文件内容被读取时更新的时间
+ `文件特殊属性`
    + Set UID ：当 s 标志出现在文件拥有者的 x 权限中，此时就被称为 Set UID 。也就是如果用户存在 x 权限，那么在执行时将获得文件拥有者的权限
        + 只针对二进制文件有效
        + 执行者对于该程序需要具有 x 权限
        + 本权限仅在执行程序过程中有效
        + 执行者将具有该文件拥有者的权限
    + Set GID ：当 s 标志出现在文件群组的 x 权限中，此时就被称为 Set GID。也就是如果用户存在 x 权限，那么在执行时将获的群组的权限。
        + 对二进制程序有用；
        + 程序执行者对该程序具备 x 权限；
        + 执行过程中获的群组的权限
    + SBIT ：当 t 标志出现在其他人 x 权限中，此时就被称为 SBIT。
        + 当用户对此目录具有 w,x 权限，就具有写入的权限；
        + 当用户在该目录建立文件或目录，仅有自己和 root 可删除



+ `xxxxx`：xxxxxx
+ `xxxxx`：xxxxxx

 
