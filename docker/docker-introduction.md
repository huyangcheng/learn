> 内容源自阅读 [`第一本 Docker 书`](https://item.jd.com/11909234.html)

### Docker 简介

Docker 是一个能够把开发的应用程序自动部署到容器的开源引擎。

Docker 在虚拟化的容器执行环境中增加了一个应用程序部署引擎。该引擎提供一个轻量、快速的环境，能够运行开发者的程序。

Docker 依赖于 “写时复制” 模型，使修改应用程序非常迅速。

`大多数 Docker 容器只需不到 1 秒即可启动`。去除管理程序的开销，Docker 容器拥有很高的性能，同时同一台宿主机可以运行更多的容器，使用户可以尽可能充分利用系统资源。

使用 Docker，开发人员只需要关心容器中运行的应用程序，运维人员只需要关心如何管理容器。

Docker 设计的目的就是加强开发人员写代码的开发环境与应用程序部署的生产环境的一致性。

Docker 的目标之一就是缩短从开发、测试到部署、上线运行的周期，让应用具备可移植性，易于构建，易于写作。

### Docker 组件

Docker 的核心组件分为：

+ Docker 客户端和服务器，也称为 Docker 容器。
+ Docker 镜像。
+ Registry。
+ Docker 容器。

**Docker 客户端和服务器**

Docker 是一个客户端/服务器架构的程序。客户端只需要向服务器或守护进程发出请求，服务器或守护进程将完成的工作返回结果。

Docker 服务器也被称为 Docker 引擎。

Docker 提供一个命令行工具 docker 以及 RESTful Api 来与守护进程交互。

用户可以在同一宿主机上运行守护进程和客户端，也可以从本地的客户端连接运行在另一台宿主机的远程守护进程

![`Docker 架构图`](http://huyangcheng.com/img/docker/docker-framework.png)

**Docker 镜像**

镜像是构建 Docker 世界的基石。用于基于镜像运行自己的容器。

镜像也是 Docker 生命周期中的 “构建”部分。

镜像是基于联合文件系统的一种层式结构，由一系列指令一步一步构建出来。

**Registry**

Docker 用 Registry 保存用户构建的镜像。

Registry 分为公共和私有两种，用户可以在 Docker Hub 上保存镜像，也可以架设自己的私有 Registry。

**容器**

Docker 可以帮用户构建和部署容器，用户只需把自己的应用程序或服务打包放入容器即可。

容器是基于镜像启动起来的，容器中可以运行一个或多个进程。

容器有可以理解为是 Docker 生命周期中的 “启动或执行”部分。

Docker 借鉴了标准集装箱的概念。标准集装箱运输货物，而 Docker 运输的是软件。

每个容器都包含一个软件镜像，也就是容器的 “货物” ，而且与真正的货物一样，容器里的软件镜像也可以进行一些操作。例如，镜像可以被创建、启动、关闭、重启以及销毁。

### 能用 Docker 做什么

容器可以为各种测试提供很好的沙箱环境。并且容器本身就具有 “标准型” 的特征，非常适合为服务创建构建快。

Docker 的一些应用场景如下：

+ 加速本地开发和构建流程，使其更高效、轻量化。开发人员可以构建、运行并分享容器。容器可以在开发环境中构建，然后提交到测试环境，最终进入生产环境。
+ 能够让独立服务或应用程序在不同环境种，得到相同的运行结果。
+ 创建隔离环境进行测试。

### Docker 的技术组件

+ 一个原生的 Linux 容器格式，Docker 中称为 libcontainer。
+ Linux 内核的命名空间（namespace），用于隔离文件系统、进程和网络。
+ 文件系统隔离：每个容器都拥有自己的 root 文件系统。
+ 进程隔离：每个容器都运行在自己的进程环境中。
+ 网络隔离：容器间的虚拟网络接口和 IP 地址都是分开的。
+ 资源隔离和分组：使用 cgroups 将 CPU 和内存之类的资源独立分配给每个容器。
+ 写时复制：文件系统都是通过写时复制创建的，这意味着文件系统是分层的、快速的，而且占用磁盘空间更小。
+ 日志：容器产生的 STDOUT、STDERR 和 STDIN 这些 IO 流都会被手机记入日志，用来进行日志分析和故障排除。
+ 交互式 shell：用户可以创建一个伪 tty 终端，将其连接到 STDIN，并为容器提供一个交互式 shell。
